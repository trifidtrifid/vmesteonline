require.config({baseUrl:"/build",paths:{"datepicker-backoffice":"../js/shop/backoffice/bootstrap-datepicker-backoffice","datepicker-ru":"../js/lib/date-time/locales/bootstrap-datepicker.ru"},shim:{"datepicker-backoffice":{deps:["jquery","jquery_ui"],exports:"datepicker-backoffice"},"datepicker-ru":{deps:["jquery","datepicker-backoffice"],exports:"datepicker-ru"}}}),require(["jquery","shop-modules.min","commonM.min","loginModule.min","datepicker-backoffice","datepicker-ru"],function(a,b,c,d){function e(b){function c(c){var d=!0;if(c.state)if("page"==c.state.type){if("orders-history"==c.state.pageName)a(".shop-trigger.go-to-orders").trigger("click",[d]);else if("profile"==c.state.pageName)a(".user-menu a:eq(0)").trigger("click");else if("edit-profile"==c.state.pageName){var e=!0;a(".user-menu a:eq(0)").trigger("click",[e])}}else"default"==c.state.type&&(a(".page").hide(),b.show())}window.history.replaceState(i,null,h),window.addEventListener("popstate",c,!1)}function f(c){a(".navbar").removeClass("over-rightbar"),a(".modal-backdrop").hide();var d=!0;if(c.state)if("modal"==c.state.type)a(".page").hide(),a(".page.main-container-inner").show(),a(".shop-orders").hide(),a(".shop-products").show(),b.shopCommonModule.identificateModal(c.state.productid,d),a("footer").addClass("short-footer");else if("category"==c.state.type)a(".page").hide(),a(".page.main-container-inner").show(),a(".shop-orders").hide(),a(".shop-products").show(),b.categoryModule.LoadCategoryByURLHash(c.state.categoriesHash),a("footer").addClass("short-footer");else if("page"==c.state.type)if("orders-history"==c.state.pageName)a(".shop-trigger.go-to-orders").trigger("click",[d]);else if("profile"==c.state.pageName)a(".user-menu a:eq(0)").trigger("click");else if("edit-profile"==c.state.pageName){var e=!0;a(".user-menu a:eq(0)").trigger("click",[e])}else"confirm-order"==c.state.pageName&&a(".basket-bottom .btn-order").trigger("click");else"default"==c.state.type&&(a(".shop-trigger.back-to-shop").trigger("click",[d]),a(".modal.in .close").trigger("click",[d]))}function g(a){u=470>a?a:470,t.width(u)}var h=document.location.hash,i={type:"default"};if(a(".shop-landing").length)e(a(".landing-page")),a(".landing-logout").click(function(a){a.preventDefault(),c.logout()}),b.shopCommonModule.initLanding(),c.init();else if(a(".page-about-shop").length)e(a(".shop-about")),b.shopCommonModule.initShopAbout(),c.init();else{var j=a(".back-to-shop");if(j.removeClass("no-prevent"),j.parent().addClass("active"),b.spinnerModule.initProductsSpinner(),globalUserAuth&&b.shopCommonModule.initBasketInReload(),b.categoryModule.InitClickOnCategory(),b.ordersModule.initOrderPlusMinus(a(".shop-orders")),c.init(),b.shopCommonModule.InitProductDetailPopup(a(".catalog .product-link")),b.basketModule.InitAddToBasket(a(".fa-shopping-cart")),0==a(".login-page").length&&0==a(".page-about-shop").length&&0==a(".shop-landing").length&&window.history.replaceState(i,null,h),h){var k=h.split("#");if(h=k[1],-1!=h.indexOf("p=")){var l=h.split("=");b.shopCommonModule.identificateModal(l[1],!0)}else if(-1!=h.indexOf("cat="))for(var m=h.split(";"),n=m.length,o=0;n>o;o++)l=m[o].split("="),a(".shop-menu li").each(function(){a(this).data("catid")==l[1]&&a(this).find("a").trigger("click",!0)});else if("orders-history"==h)a(".shop-trigger.go-to-orders").trigger("click");else if("profile"==h)a(".user-menu a:eq(0)").trigger("click");else if("edit-profile"==h){var p=!0;a(".user-menu a:eq(0)").trigger("click",[p])}else"confirm-order"==h&&a(".basket-bottom .btn-order").trigger("click");"about-shop"==h&&a("footer .about-shop-link").trigger("click")}window.addEventListener("popstate",f,!1),d.initLogin();try{var q=a(window),r=a(".show-right"),s=a(".hide-right"),t=a(".shop-right"),u=470;t.css("min-height",q.height()-115),r.click(function(){a(this).hasClass("active")?s.trigger("click"):(a(this).animate({right:"439px"},200).addClass("active"),t.css("display","block").animate({right:0},200))}),s.click(function(){t.animate({right:-u},200,function(){a(this).css("display","none")}),r.animate({right:"-31px"},200).removeClass("active")});var v=function(){var b=q.height(),c=b-a(".navbar").height()-a("footer").height();a(".catalog-order").css("max-height",c-215),t.css("min-height",b-115)},w=q.width();q.resize(function(){var a=q.width();a>980?t.css({right:"0",display:"block"}):a!=w&&(t.css("right",-u),r.css({right:"-31px"}).removeClass("active")),(screen.width<321||screen.height<321)&&v(),g(a),w=a}),g(q.width()),window.addEventListener("orientationchange",v,!1),window.onorientationchange=v,a(".dropdown-menu li a").click(function(b){b.preventDefault(),a(this).closest(".btn-group").find(".btn-group-text").text(a(this).text())}),a(".nav-list a").click(function(b){b.preventDefault(),a(this).closest("ul").find(".active").removeClass("active"),a(this).parent().addClass("active")}),a(".modal-order-end .btn-grey").click(function(){a(".modal-order-end").modal("hide")}),0==a(".catalog-order li").length&&a(".additionally-order").addClass("hide"),a(".login-link").click(function(){a(".modal-login").modal()})}catch(x){}window.onerror=function(b,c,d){a(".modal.in").find(".close").trigger("click");var e=a("#error-details"),f=a(".modal-error");f.height("130px").modal(),e.hide().removeClass("active"),e.html("Ошибка:"+b+"<br>Файл:"+c+"<br>Строка:"+d),a(".error-details-link.no-init").click(function(){var b,c=f.height(),d=a("#error-details").height();e.toggleClass("active"),e.hasClass("active")?(b=c+d,e.slideDown(200),f.height(b)):(b=c-d,e.slideUp(200,function(){f.height(b)})),a(this).removeClass("no-init")}),a(".modal-backdrop").click(function(){a(".modal.in").find(".close").trigger("click")})}}});