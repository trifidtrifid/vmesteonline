define("adminka.min",["jquery","shop-initThrift.min","bo-common.min"],function(a,b,c){function d(){function d(a,c){var d,e=b.userClient.getUserContactsExt(a);d=c?"; ":"<br>";var f="Email: "+e.email;return e.mobilePhone?f+=d+" Телефон: "+e.mobilePhone:!1,e.homeAddress?f+=d+" Адрес: "+e.homeAddress.street.name+" "+e.homeAddress.building.fullNo+", "+e.homeAddress.flatNo:!1,f}function e(a,b){a.find("span").text(b.firstName+" "+b.lastName),a.closest("tr").find(".owner-contacts").html(d(b.id))}function f(c,d){var e,f;a(".adminka-statistics tr").each(function(){e=a(this).attr("id"),f=b.clientBO.totalShopReturn(e,c,d),a(this).find(".shop-total").text(f)})}var g=parseInt((new Date).getTime()/1e3);g-=g%86400;var h=86400,i=a("body").height();c.setSidebarHeight(i),a(".adminka-shops table tr").each(function(){var c=a(this).attr("id"),e=b.client.getShop(c),f=b.userClient.getUserInfoExt(e.ownerId),g=d(e.ownerId);a(this).find(".owner-name span").text(f.firstName+" "+f.lastName),a(this).find(".owner-contacts").html(g),b.client.isActivated(c)&&a(this).find(".shop-activation input").attr("checked","checked")}),a(".shop-activation .checkbox .lbl").click(function(){var c=a(this).closest("tr").attr("id"),d=!0;a(this).parent().find("input.ace").prop("checked")&&(d=!1),b.clientBO.activate(c,d)}),a(".update-owner-link").click(function(c){c.preventDefault();var d="<div class='update-owner-line'><input type='text' class='owner-email' placeholder='email нового владельца'><a href='#' class='btn btn-sm no-border btn-primary btn-update'>Изменить</a></div>",f=a(this).closest("td");0==f.find(".update-owner-line").length&&f.append(d),f.find(".update-owner-line").slideToggle(),f.find(".btn-update").one("click",function(c){c.preventDefault();var d=a(this).closest("tr").attr("id"),g=a(this).closest("td").find(".owner-email").val(),h=b.clientBO.setUserShopRole(d,g,3);f.find(".update-owner-line").slideToggle(),e(f,h)})}),a(".adminka-statistics-date .btn").click(function(a){a.preventDefault();var b,c;b=Date.parse(j.val())/1e3,c=Date.parse(k.val())/1e3,b-=b%86400,c-=c%86400,f(b,c)});var j=a("#datepicker-from"),k=a("#datepicker-to");a(".adminka .nav-list a").click(function(b){b.preventDefault(),a(".back-tab").hide();var c=a(this).parent().index();switch(c){case 0:a(".adminka-shops").show();break;case 1:a(".adminka-statistics").show(),j.datepicker({autoclose:!0,language:"ru"}).next().on(ace.click_event,function(){a(this).prev().focus()}),k.datepicker({autoclose:!0,language:"ru"}).next().on(ace.click_event,function(){a(this).prev().focus()});var d=g-30*h,e=new Date(1e3*d),f=e.getDate();f=10>f?"0"+f:f;var i=e.getMonth()+1;i=10>i?"0"+i:i;var l=e.getFullYear();k.datepicker("setValue",g),j.val(i+"-"+f+"-"+l)}a(this).closest("ul").find(".active").removeClass("active"),a(this).parent().addClass("active")}),a(".user-short a.no-login").click(function(b){b.preventDefault(),a(this).parent().addClass("open"),commonModule.openModalAuth()})}return{initAdminka:d}});