define("shop-search.min",["jquery","jquery_ui","shop-initThrift.min","shop-basket.min","shop-orders.min","shop-category.min","shop-common.min","shop-spinner.min"],function(a,b,c,d,e,f,g,h){function i(b){try{for(var d=c.userClient.getAddressCatalogue(),e=d.countries,f=e.length,g=[],h=[],i=[],j=[],k=[],l=[],m=0;f>m;m++)g[m]=e[m].name,h[m]=e[m].id;b.find(".country-delivery").autocomplete({source:g}),b.find(".city-delivery").focus(function(){var e,i=b.find(".country-delivery").val();if(i)for(var j=0;f>j;j++)if(i==g[j]){e=c.userClient.getCities(h[j]);break}e||(e=d.cities);var k=e.length,l=[];for(j=0;k>j;j++)l[j]=e[j].name;a(this).autocomplete({source:l})}),b.find(".street-delivery").focus(function(){var e,f=b.find(".city-delivery").val(),g=d.cities.length;if(f)for(var h=0;g>h;h++)if(f==i[h]){e=c.userClient.getStreets(j[h]);break}e||(e=d.streets);var k=e.length,l=[];for(h=0;k>h;h++)l[h]=e[h].name;a(this).autocomplete({source:l})}),b.find(".building-delivery").focus(function(){var e,f=b.find(".street-delivery").val(),g=d.streets.length;if(f)for(var h=0;g>h;h++)if(f==k[h]){e=c.userClient.getBuildings(l[h]);break}e||(e=d.buildings);var i=e.length,j=[];for(h=0;i>h;h++)j[h]=e[h].fullNo;a(this).autocomplete({source:j})})}catch(n){}}try{if(a.widget("custom.catcomplete",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,e="";a.each(c,function(a,c){c.category!=e&&(b.append("<li class='ui-autocomplete-category'>"+c.category+"</li>"),e=c.category),d._renderItemData(b,c)})}}),0==a(".login-layout").length){for(var j=a(".main-container.shop").attr("id"),k=c.client.getProductsByCategories(j),l=k.length,m=0,n=[],o=0;l>o;o++)for(var p=k[o].childs.length,q=0;p>q;q++)n[m++]={label:k[o].childs[q].name,category:k[o].name};a("#search").catcomplete({delay:0,source:n,select:function(b,d){var e=require("shop-basket"),f=require("shop-common");if(globalUserAuth){for(var g=c.client.getProducts(0,1e3,0),h=g.products,i=h.length,j=[],k=0;i>k;k++)if(h[k].name==d.item.label){if(h[k].qnty=h[k].minClientPack,h[k].prepackLine=[],h[k].prepackRequired&&(j[h[k].minClientPack]=1),0==a(".tabs-days").length){var l=c.client.createOrder(0),m=new Date(1e3*l.date);e.addTabToBasketHtml(m,l.id)}e.AddProductToBasketCommon(h[k],j),f.markAddedProduct()}}else e.selectorForCallbacks=a(this),e.callbacks.add(e.BasketTrigger),f.openModalAuth()}})}a(".form-group").submit(function(b){b.preventDefault();for(var d=a("#search").val().toLowerCase(),e=c.client.getProducts(0,1e3,0),g=e.products,i=g.length,j=[],k=0,l=0;i>l;l++)-1!=g[l].name.toLowerCase().indexOf(d)&&(j[k++]=g[l]);a(".main-content .catalog table tbody").html("").append(f.createProductsTableHtml(j)),h.initProductsSpinner();var m=require("shop-common");m.InitProductDetailPopup(a(".product-link")),m.markAddedProduct();var n=require("shop-basket");n.InitAddToBasket(a(".fa-shopping-cart"))})}catch(r){alert(r+" Ошибка shop-search")}return{initAutocompleteAddress:i}});