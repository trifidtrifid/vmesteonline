define("shop-category.min",["jquery","shop-initThrift.min","shop-basket.min","shop-common.min","shop-spinner.min"],function(a,b,c,d,e){function f(a){var b=a.length,c="";for(i=0;b>i;i++){var d="";a[i].unitName&&(d=a[i].unitName);var e,f,g=require("shop-common.min");f=a[i].imageURL?a[i].imageURL:g.noPhotoPic,c+='<tr class="product" data-prepack="'+a[i].prepackRequired+'" data-productid="'+a[i].id+'"><td><a href="#" class="product-link"><div class="product-pic"><img src="'+f+'?w=40&h=40" alt="'+a[i].name+'"/></div><span><span class="product-name">'+a[i].name+"</span>"+a[i].shortDescr+'</span></a><div class="modal"></div></td><td class="td-producer">'+e+'</td><td class="product-price">'+a[i].price+'</td><td class="td-spinner"><input type="text" data-step="'+a[i].minClientPack+'" class="input-mini spinner1" /> <span class="added-text">добавлен</span></td><td><span class="unit-name">'+d+'</span></td><td><a href="#" title="Добавить в корзину" class="fa fa-shopping-cart"></a><span href="#" title="Продукт уже у вас в корзине" class="fa fa-check"></span></td></tr>'}return c}function g(c){try{var d=require("shop-common.min"),g=b.client.getProductCategories(c),h=g.length,i="",k="";(g[0]&&0!=g[0].parentId||void 0===g[0])&&(k='<li><a class="shopmenu-back" href="#"><i class="fa fa-reply-all"></i><span>Назад</span></a></li>');for(var l=0;h>l;l++)i+='<li data-parentid="'+g[l].parentId+'" data-catid="'+g[l].id+'"><a href="#" class="btn btn-app btn-info btn-sm"><i class="fa fa-beer"></i><span>'+g[l].name+"</span></a></li>";a(".shop-menu ul").html(k).append(i);var m=b.client.getProducts(0,1e3,c).products;a(".main-content .catalog table tbody").html("").append(f(m)),d.markAddedProduct()}catch(n){alert(n+" Функция InitLoadCategory")}e.initProductsSpinner();var o=require("shop-basket.min");d.InitProductDetailPopup(a(".product-link")),o.InitAddToBasket(a(".fa-shopping-cart")),j(),d.setSidebarHeight()}function h(a){var b,c=a.split(";"),d=c.length,e=d-1;if(0>e)b=0;else{var f=c[e].split("=");b=f[1]}g(b)}function j(){try{a(".shop-menu li a").click(function(b){b.preventDefault();var c,d=a(this).hasClass("shopmenu-back"),e=a(this).parent().data("catid"),f=document.location.hash;d?(c=document.location.hash.split(";"),c.pop(),c=c.join(";"),h(c)):(c=f?f+";cat="+e:"#cat="+e,g(e));var i={type:"category",categoriesHash:c};window.history.pushState(i,null,"shop.jsp"+c)})}catch(b){alert(b+" Функция InitClickOnCategory")}}return{createProductsTableHtml:f,InitLoadCategory:g,InitClickOnCategory:j,LoadCategoryByURLHash:h}});